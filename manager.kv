#:kivy 1.9.0

<CEToolBoxButton@Button>:
    font_size: '15sp'
    height: '18sp'

<CalculateButton@CEToolBoxButton>:
    text: "Calculate"
    on_release: root.on_release 

<MenuButton@CEToolBoxButton>:
    text: 'Menu'
    on_press: root.on_press

<CEToolBoxLabel>:
    font_size: '15sp'
    height: '30sp'
    width: '110sp'
    text_size: self.width, None
    markup: True

<AboutLabel@Label>:
	font_size: '15sp'
	size_hint_y: None
    text_size: self.width, None
    height: self.texture_size[1]	
	markup: True


<CEToolBoxTextInput>:
    font_size: '15sp'
    height: '30sp'
    width: '60sp'
    input_type: 'number'

<CEToolBoxUnitLabel@Label>:
    font_size: '15sp'
    height: '30sp'
    width: '30sp'
    #magic to use if I want a fixed size
    #size_hint_y: None
    
<CEToolBoxSpinner>:
    font_size: '15sp'
    height: '30sp'
	width: '30sp'
	#magic to use if I want a fixed size
	#size_hint_y: None
	
<TopScreenLayout>:
    size_hint_y: None
    size_hint_x: None
    minimum_height: '350sp'
    minimum_width: '350sp'
    cols: 3
    padding: 10
    spacing: 10

<TopPopupLayout>:
	size_hint_y: None
    size_hint_x: None
    minimum_height: '350sp'
    minimum_width: '350sp'
    cols: 2
    padding: 10
    spacing: 10

<DownMenuLayout>:
    size_hint_y: None
    size_hint_x: None
    minimum_height: '30sp'
    minimum_width: '350sp'
    cols: 3 
    padding: 10
    spacing: 10

<DownMenuClose>:
    size_hint_y: None
    size_hint_x: None
    minimum_height: '30sp'
    minimum_width: '100sp'
    id: mc
    cols: 1
    padding: 10
    spacing: 10
    
<ScrollViewTop@ScrollView>:
    size_hint_y: 1.
    size_hint_x: 1.
    
<ScrollViewSpe>:
    height: self.change_child_height(self.height)
    width: self.change_child_width(self.width)

<CEToolBoxPopup>:
	title_size: "18sp"
	title_align: "center"
	
<ErrorPopup>:
	id: popup
	title: "Error"
	title_color: [1, 0, 0, 1]
	
	
	BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.80
            
            TopPopupLayout:
				cols: 1
				rows: 1
				
				AboutLabel:
					id: errormessage
                    
        ScrollViewSpe:
            size_hint_y: 0.20
        
            DownMenuClose:
                Button:
                    text: 'Close'
                    on_press: popup.dismiss()

<InjectionPopup>:
    id: popup
    title: "Injection Details"


    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.80
            
            TopPopupLayout:
				id: inlayout
                    
        ScrollViewSpe:
            size_hint_y: 0.20
        
            DownMenuClose:
                Button:
                    text: 'Close'
                    on_press: popup.dismiss()

<MobilityPopup>:
    id: popup
    title: "Mobility Details"

    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.80
            
            TopPopupLayout:
				id: inlayout
                    
        ScrollViewSpe:
            size_hint_y: 0.20
        
            DownMenuClose:
                Button:
                    text: 'Close'
                    on_press: popup.dismiss()

<ViscosityPopup>:
    id: popup
    title: "Viscosity Details"

    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.80
            
            TopPopupLayout:
				id: inlayout
                    
        ScrollViewSpe:
            size_hint_y: 0.20
        
            DownMenuClose:
                Button:
                    text: 'Close'
                    on_press: popup.dismiss()

            
<ConductivityPopup>:
    id: popup
    title: "Coductivity Details"

    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.80
            
            TopPopupLayout:
				id: inlayout
        
        
        ScrollViewSpe:
            size_hint_y: 0.20
        
            DownMenuClose:
                Button:
                    text: 'Close'
                    on_press: popup.dismiss()
        
<FlowPopup>:
    id: popup
    title: "Flow Details"

    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.80
            
            TopPopupLayout:
				id: inlayout

        ScrollViewSpe:
            size_hint_y: 0.20
        
            DownMenuClose:
                Button:
                    text: 'Close'
                    on_press: popup.dismiss()
<MenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 10

        Button:
            text: 'Injection'
            on_press: root.manager.current = 'injection'

        Button:
            text: 'Flowrate'
            on_press: root.manager.current = 'flow'
        
        Button:
			text: 'Mobility'
			on_press: root.manager.current = 'mobility'
        
        Button:
            text: 'Viscosity'
            on_press: root.manager.current = 'viscosity'

        Button:
            text: 'Conductivity'
            on_press: root.manager.current = 'conductivity'

        Button:
            text: 'About'
            on_press: root.manager.current = 'about'


<InjectionScreen>:
    fullscreen: True
    
    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.85

            
            TopScreenLayout:
                rows: 9
                
                CEToolBoxLabel:
                    text: "Capillary Length"

                CEToolBoxTextInput:        
                    id: Capillary
                
                CEToolBoxUnitLabel:
                    id: CapillaryUnit

                CEToolBoxLabel:
                    text: "Length to window"
                
                CEToolBoxTextInput:
                    id: Towindow
                
                CEToolBoxUnitLabel:
                    id: TowindowUnit
                
                CEToolBoxLabel:
                    text: "Inside diameter"
            
                CEToolBoxTextInput:
                    id: Idiameter
                
                CEToolBoxUnitLabel:
                    id: IdiameterUnit
            
                CEToolBoxLabel:
                    text: "Pressure"
                
                CEToolBoxTextInput:
                    id: Pressure
                
                CEToolBoxSpinner:
                    id: PressureUnit
                    values: ["mbar", "psi"]
                    
                CEToolBoxLabel:        
                    text: "Time"
                
                CEToolBoxTextInput:
                    id: Time
                
                CEToolBoxUnitLabel:
                    id: TimeUnit

                CEToolBoxLabel:
                    text: "Viscosity"
            
                CEToolBoxTextInput:
                    id: Viscosity
                
                CEToolBoxUnitLabel:
                    id: ViscosityUnit
                
                CEToolBoxLabel:
                    text: "Concentration"
            
                CEToolBoxTextInput:
                    id: Concentration
                    
                CEToolBoxSpinner:
                    id: ConcentrationUnit
                    values: ["g/L", "mmol/L"]

                CEToolBoxLabel:
                    text: "Molecular weight"
                            
                CEToolBoxTextInput:
                    id: Molweight
                    
                CEToolBoxUnitLabel:
                    id: MolweightUnit
                
                CEToolBoxLabel:
                    text: "Voltage"
                            
                CEToolBoxTextInput:
                    id: Voltage
                
                CEToolBoxUnitLabel:
                    id: VoltageUnit
    
        ScrollViewSpe:
            size_hint_y: 0.15
                        
            DownMenuLayout:  

                CalculateButton:
                    on_release: root.show_injection_results()
                    
                Button:
                    id: Resetbtn
                    text: "Reset"
                    on_press: Capillary.text="100.0"
                    on_press: CapillaryUnit.text="cm"
                    on_press: Towindow.text="100.0"
                    on_press: TowindowUnit.text="cm"
                    on_press: Idiameter.text="50.0"
                    on_press: IdiameterUnit.text="µm"
                    on_press: Pressure.text="30.0"
                    on_press: PressureUnit.text="mbar"
                    on_press: Time.text="10.0"
                    on_press: TimeUnit.text="s"
                    on_press: Viscosity.text="1.0"
                    on_press: ViscosityUnit.text="cp"
                    on_press: Concentration.text="1.0"
                    on_press: ConcentrationUnit.text="g/L"
                    on_press: Molweight.text="1000.0"
                    on_press: MolweightUnit.text="g/mol"
                    on_press: Voltage.text="3.0"
                    on_press: VoltageUnit.text="kV"
                
                MenuButton:
                    on_press: root.manager.current = 'menu'



<ViscosityScreen>:
    fullscreen: True
    
    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.85

            
            TopScreenLayout:
                rows: 5
                
                CEToolBoxLabel:
                    text: "Capillary Length"

                CEToolBoxTextInput:        
                    id: Capillary
                
                CEToolBoxUnitLabel:
                    id: CapillaryUnit

                CEToolBoxLabel:
                    text: "Length to window"
                
                CEToolBoxTextInput:
                    id: Towindow
                
                CEToolBoxUnitLabel:
                    id: TowindowUnit
                
                CEToolBoxLabel:
                    text: "Inside diameter"
            
                CEToolBoxTextInput:
                    id: Idiameter
                
                CEToolBoxUnitLabel:
                    id: IdiameterUnit
            
                CEToolBoxLabel:
                    text: "Pressure"
                
                CEToolBoxTextInput:
                    id: Pressure
                
                CEToolBoxSpinner:
                    id: PressureUnit
                    values: ["mbar", "psi"]
                    
                CEToolBoxLabel:        
                    text: "Detection time"
                
                CEToolBoxTextInput:
                    id: Detectiontime
                
                CEToolBoxSpinner:
                    id: DetectiontimeUnit
                    values: ["s", "min"]

    
        ScrollViewSpe:
            size_hint_y: 0.15
                        
            DownMenuLayout:  

                CalculateButton:
                    on_release: root.show_viscosity_results()
                    
                Button:
                    id: Resetbtn
                    text: "Reset"
                    on_press: Capillary.text="100.0"
                    on_press: CapillaryUnit.text="cm"
                    on_press: Towindow.text="100.0"
                    on_press: TowindowUnit.text="cm"
                    on_press: Idiameter.text="50.0"
                    on_press: IdiameterUnit.text="µm"
                    on_press: Pressure.text="30.0"
                    on_press: PressureUnit.text="mbar"
                    on_press: Detectiontime.text="10.0"
                    on_press: DetectiontimeUnit.text="min"
                
                MenuButton:
                    on_press: root.manager.current = 'menu'
            
          
<ConductivityScreen>:
    fullscreen: True
    
    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.85

            
            TopScreenLayout:
                rows: 5
                
                CEToolBoxLabel:
                    text: "Capillary Length"

                CEToolBoxTextInput:        
                    id: Capillary
                
                CEToolBoxUnitLabel:
                    id: CapillaryUnit

                CEToolBoxLabel:
                    text: "Length to window"
                
                CEToolBoxTextInput:
                    id: Towindow
                
                CEToolBoxUnitLabel:
                    id: TowindowUnit
                
                CEToolBoxLabel:
                    text: "Inside diameter"
            
                CEToolBoxTextInput:
                    id: Idiameter
                
                CEToolBoxUnitLabel:
                    id: IdiameterUnit
				
				CEToolBoxLabel:
                    text: "Voltage"
                 
                CEToolBoxTextInput:
                    id: Voltage
                
                CEToolBoxUnitLabel:
                    id: VoltageUnit
                    
                CEToolBoxLabel:
                    text: "Electric current"
                 
                CEToolBoxTextInput:
                    id: Electriccurrent
                
                CEToolBoxUnitLabel:
                    id: ElectriccurrentUnit
                 
    
        ScrollViewSpe:
            size_hint_y: 0.15
                        
            DownMenuLayout:  

                CalculateButton:
                    on_release: root.show_conductivity_results()
                    
                Button:
                    id: Resetbtn
                    text: "Reset"
                    on_press: Capillary.text="100.0"
                    on_press: CapillaryUnit.text="cm"
                    on_press: Towindow.text="100.0"
                    on_press: TowindowUnit.text="cm"
                    on_press: Idiameter.text="50.0"
                    on_press: IdiameterUnit.text="µm"
                    on_press: Voltage.text="3.0"
                    on_press: VoltageUnit.text="V"
                    on_press: Electriccurrent.text="10.0"
                    on_press: ElectriccurrentUnit.text="µA"
                
                MenuButton:
                    on_press: root.manager.current = 'menu'

<FlowScreen>:
    fullscreen: True
    
    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            size_hint_y: 0.85

            
            TopScreenLayout:
                rows: 5
                
                CEToolBoxLabel:
                    text: "Capillary Length"

                CEToolBoxTextInput:        
                    id: Capillary
                
                CEToolBoxUnitLabel:
                    id: CapillaryUnit

                CEToolBoxLabel:
                    text: "Length to window"
                
                CEToolBoxTextInput:
                    id: Towindow
                
                CEToolBoxUnitLabel:
                    id: TowindowUnit
                
                CEToolBoxLabel:
                    text: "Inside diameter"
            
                CEToolBoxTextInput:
                    id: Idiameter
                
                CEToolBoxUnitLabel:
                    id: IdiameterUnit
				
				CEToolBoxLabel:
                    text: "Voltage"
                 
                CEToolBoxTextInput:
                    id: Voltage
                
                CEToolBoxUnitLabel:
                    id: VoltageUnit
                    
                CEToolBoxLabel:
                    text: "EOF time"
             
                CEToolBoxTextInput:
                    id: Electroosmosis
                
                CEToolBoxSpinner:
                    id: ElectroosmosisUnit
                    values: ["s", "min"]
                 
    
        ScrollViewSpe:
            size_hint_y: 0.15
                        
            DownMenuLayout:  

                CalculateButton:
                    on_release: root.show_flow_results()
                    
                Button:
                    id: Resetbtn
                    text: "Reset"
                    on_press: Capillary.text="100.0"
                    on_press: CapillaryUnit.text="cm"
                    on_press: Towindow.text="100.0"
                    on_press: TowindowUnit.text="cm"
                    on_press: Idiameter.text="50.0"
                    on_press: IdiameterUnit.text="µm"
                    on_press: Voltage.text="3.0"
                    on_press: VoltageUnit.text="V"
                    on_press: Electroosmosis.text="1.0"
                    on_press: ElectroosmosisUnit.text="min"
                
                MenuButton:
                    on_press: root.manager.current = 'menu'

<MobilityScreen>:
    fullscreen: True
    
    BoxLayout:
        orientation: 'vertical'
        
        ScrollViewSpe:
            id: tscrollview
            size_hint_y: 0.85

            
            TopScreenLayout:
				id: inlayout
                rows: 6
                
                CEToolBoxLabel:
                    text: "Capillary Length"

                CEToolBoxTextInput:        
                    id: Capillary
                
                CEToolBoxUnitLabel:
                    id: CapillaryUnit

                CEToolBoxLabel:
                    text: "Length to window"
                
                CEToolBoxTextInput:
                    id: Towindow
                
                CEToolBoxUnitLabel:
                    id: TowindowUnit
				
				CEToolBoxLabel:
                    text: "Voltage"
                 
                CEToolBoxTextInput:
                    id: Voltage
                
                CEToolBoxUnitLabel:
                    id: VoltageUnit
                    
                CEToolBoxLabel:
                    text: "EOF time"
             
                CEToolBoxTextInput:
                    id: Electroosmosis
                
                CEToolBoxSpinner:
                    id: ElectroosmosisUnit
                    values: ["s", "min"]
                    
                CEToolBoxLabel:
					text: "Time compound 1"
				
				CEToolBoxTextInput:
					id: Timecompound1
				
				CEToolBoxSpinner:
                    id: Timecompound1Unit
                    values: ["s", "min"]
				
                 
    
        ScrollViewSpe:
            size_hint_y: 0.15
                        
            DownMenuLayout:  

                CalculateButton:
                    on_release: root.show_mobility_results()
                    
                Button:
                    id: Resetbtn
                    text: "Reset"
                    on_press: Capillary.text="100.0"
                    on_press: CapillaryUnit.text="cm"
                    on_press: Towindow.text="100.0"
                    on_press: TowindowUnit.text="cm"
                    on_press: Voltage.text="3.0"
                    on_press: VoltageUnit.text="V"
                    on_press: Electroosmosis.text="1.0"
                    on_press: ElectroosmosisUnit.text="min"
                    on_press: Timecompound1.text="1.0"
                    on_press: Timecompound1Unit.text="min"
                    on_press: root.reset()
                
                MenuButton:
                    on_press: root.manager.current = 'menu'


<AboutScreen>:
    
    BoxLayout:
		orientation: 'vertical'
			
		ScrollViewSpe:
			size_hint_y: 0.85
			
			TopScreenLayout:
				cols: 1
				rows: 4
				
				AboutLabel:
					halign: "center"
					id: alabel
				
				AboutLabel:
					text: "The Capillary Electrophoresis (CE) Toolbox is a software for computing Capillary Electrophoresis parameters."
				
				AboutLabel:
					text: "CEToolBox kivy is licensed under the Apache License Version 2.0. You may obtain a copy of the License at [ref=http://www.apache.org/licenses/LICENSE-2.0][color=#08598E]http://www.apache.org/licenses/LICENSE-2.0[/color][/ref]."
					on_ref_press:
						import webbrowser
						webbrowser.open(args[1])
					
				AboutLabel:
					text: "For more information, visit the website: [ref=http://pansanel.github.io/cetoolbox/][color=#08598E]http://pansanel.github.io/cetoolbox/[/color][/ref]"
					on_ref_press:
						import webbrowser
						webbrowser.open(args[1])
                    
		ScrollViewSpe:
			size_hint_y: 0.15
			
			DownMenuClose:
				Button:
					text: 'Menu'
					on_press: root.manager.current = 'menu'
